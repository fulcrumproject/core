  parameters:
    - name: id
      in: path
      required: true
      schema:
        $ref: "../components/schemas/common.yaml#/properties.UUID"
  get:
    operationId: tokensGet
    summary: Get a token
    tags:
      - Tokens
    description: Retrieves a specific token by ID. Note that the plain token value is not returned in this endpoint.
    x-auth-permissions:
      - role: admin
        permission: all tokens
      - role: participant
        permission: its own tokens and those of its agents
      - role: agent
        permission: not authorized
    responses:
      "200":
        description: The token details
        content:
          application/json:
            schema:
              $ref: "../components/schemas/tokens.yaml#/TokenRes"
      "404":
        description: Token not found
        content:
          application/json:
            schema:
              $ref: "../components/schemas/common.yaml#/ErrorRes"
  patch:
    operationId: tokensUpdate
    summary: Update a token
    tags:
      - Tokens
    description: Updates an existing token
    x-auth-permissions:
      - role: admin
        permission: always
      - role: participant
        permission: its own tokens and those of its agents
      - role: agent
        permission: not authorized
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              name:
                type: string
                example: "Updated Token Name"
              role:
                $ref: "../components/schemas/tokens.yaml#/AuthRole"
              expireAt:
                type: string
                format: date-time
              scopeId:
                $ref: "../components/schemas/common.yaml#/properties.UUID"
    responses:
      "200":
        description: Token updated successfully
        content:
          application/json:
            schema:
              $ref: "../components/schemas/tokens.yaml#/TokenRes"
      "404":
        description: Token not found
        content:
          application/json:
            schema:
              $ref: "../components/schemas/common.yaml#/ErrorRes"
  delete:
    operationId: tokensDelete
    summary: Delete a token
    tags:
      - Tokens
    description: Deletes a token by ID
    x-auth-permissions:
      - role: admin
        permission: always
      - role: participant
        permission: its own tokens and those of its agents
      - role: agent
        permission: not authorized
    responses:
      "204":
        description: Token deleted successfully
      "404":
        description: Token not found
        content:
          application/json:
            schema:
              $ref: "../components/schemas/common.yaml#/ErrorRes"
