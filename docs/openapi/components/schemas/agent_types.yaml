AgentTypeRes:
  type: object
  properties:
    id:
      $ref: "./common.yaml#/properties.UUID"
    name:
      type: string
      example: "Participant VM Agent"
    serviceTypeIds:
      type: array
      items:
        $ref: "./common.yaml#/properties.UUID"
      description: "IDs of service types that this agent type can provide"
    configurationSchema:
      $ref: "./agent_types.yaml#/ConfigurationSchema"
      description: "Schema defining the structure and validation rules for agent configuration"
    createdAt:
      type: string
      format: date-time
    updatedAt:
      type: string
      format: date-time

# Service schemas
CreateAgentTypeReq:
  type: object
  required:
    - name
    - configurationSchema
  properties:
    name:
      type: string
      description: Name of the agent type
      example: "VM Agent"
      minLength: 1
    serviceTypeIds:
      type: array
      description: Optional list of service type IDs that this agent type can manage
      items:
        $ref: "./common.yaml#/properties.UUID"
      example:
        [
          "550e8400-e29b-41d4-a716-446655440000",
          "550e8400-e29b-41d4-a716-446655440001",
        ]
    configurationSchema:
      $ref: "./agent_types.yaml#/ConfigurationSchema"
      description: "Schema defining the structure and validation rules for agent configuration"

UpdateAgentTypeReq:
  type: object
  properties:
    name:
      type: string
      description: Updated name of the agent type
      example: "Updated VM Agent"
      minLength: 1
    serviceTypeIds:
      type: array
      description: Updated list of service type IDs that this agent type can manage
      items:
        $ref: "./common.yaml#/properties.UUID"
      example:
        [
          "550e8400-e29b-41d4-a716-446655440000",
          "550e8400-e29b-41d4-a716-446655440002",
        ]
    configurationSchema:
      $ref: "./agent_types.yaml#/ConfigurationSchema"
      description: "Updated configuration schema"

ConfigurationSchema:
  type: object
  description: Schema defining validation rules and structure for agent configuration properties
  properties:
    properties:
      type: object
      description: Property definitions keyed by property name
      additionalProperties:
        $ref: "./service_types.yaml#/PropertyDefinition"
    validators:
      type: array
      description: Schema-level validators (e.g., exactlyOne)
      items:
        $ref: "./service_types.yaml#/SchemaValidatorConfig"
  example:
    properties:
      apiEndpoint:
        type: "string"
        label: "API Endpoint"
        required: true
        validators:
          - type: "pattern"
            config:
              pattern: "^https?://"
      maxRetries:
        type: "integer"
        label: "Max Retries"
        default: 3
        validators:
          - type: "min"
            config:
              value: 0
          - type: "max"
            config:
              value: 10
# Service Group schemas
